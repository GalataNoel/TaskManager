{"ast":null,"code":"// src/features/taskSlice.ts\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport taskService from '../services/taskService';\nconst initialState = {\n  tasks: [],\n  isLoading: false,\n  error: null\n};\n\n// Async Thunks\nexport const fetchTasks = createAsyncThunk('tasks/fetchAll', async (_, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    const response = await taskService.getTasks(auth.token);\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to fetch tasks');\n  }\n});\nexport const createTask = createAsyncThunk('tasks/create', async (taskData, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    const response = await taskService.createTask(taskData, auth.token);\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Failed to create task');\n  }\n});\nexport const updateTask = createAsyncThunk('tasks/update', async (task, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    const response = await taskService.updateTask(task, auth.token);\n    return response.data;\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Failed to update task');\n  }\n});\nexport const deleteTask = createAsyncThunk('tasks/delete', async (taskId, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    await taskService.deleteTask(taskId, auth.token);\n    return taskId;\n  } catch (error) {\n    var _error$response4, _error$response4$data;\n    return rejectWithValue(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || 'Failed to delete task');\n  }\n});\nexport const toggleTask = createAsyncThunk('tasks/toggle', async (taskId, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    await taskService.toggleTask(taskId, auth.token);\n    return taskId;\n  } catch (error) {\n    var _error$response5, _error$response5$data;\n    return rejectWithValue(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || 'Failed to toggle task');\n  }\n});\nconst taskSlice = createSlice({\n  name: 'tasks',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    // Individual cases first\n    builder.addCase(fetchTasks.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(fetchTasks.fulfilled, (state, action) => {\n      state.tasks = action.payload;\n      state.isLoading = false;\n    }).addCase(fetchTasks.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.error.message || 'Failed to fetch tasks';\n    });\n\n    // Add other async thunks similarly\n    builder.addCase(createTask.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(createTask.fulfilled, (state, action) => {\n      state.tasks.push(action.payload);\n      state.isLoading = false;\n    });\n  }\n});\nexport default taskSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","taskService","initialState","tasks","isLoading","error","fetchTasks","_","getState","rejectWithValue","auth","response","getTasks","token","data","_error$response","_error$response$data","message","createTask","taskData","_error$response2","_error$response2$data","updateTask","task","_error$response3","_error$response3$data","deleteTask","taskId","_error$response4","_error$response4$data","toggleTask","_error$response5","_error$response5$data","taskSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","push","reducer"],"sources":["/home/noel/WebstormProjects/TaskManager/client/src/features/taskSlice.ts"],"sourcesContent":["// src/features/taskSlice.ts\nimport { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { AppDispatch, RootState } from '@store/store';\nimport taskService from '../services/taskService';\nimport { enqueueSnackbar } from 'notistack';\nimport { Task } from '../types/task';\n\ninterface TaskState {\n    tasks: Task[];\n    isLoading: boolean;\n    error: string | null;\n}\n\nconst initialState: TaskState = {\n    tasks: [],\n    isLoading: false,\n    error: null\n};\n\n// Async Thunks\nexport const fetchTasks = createAsyncThunk(\n    'tasks/fetchAll',\n    async (_, { getState, rejectWithValue }) => {\n        try {\n            const { auth } = getState() as RootState;\n            const response = await taskService.getTasks(auth.token!);\n            return response.data;\n        } catch (error: any) {\n            return rejectWithValue(error.response?.data?.message || 'Failed to fetch tasks');\n        }\n    }\n);\n\nexport const createTask = createAsyncThunk(\n    'tasks/create',\n    async (taskData: Omit<Task, 'id'>, { getState, rejectWithValue }) => {\n        try {\n            const { auth } = getState() as RootState;\n            const response = await taskService.createTask(taskData, auth.token!);\n            return response.data;\n        } catch (error: any) {\n            return rejectWithValue(error.response?.data?.message || 'Failed to create task');\n        }\n    }\n);\n\nexport const updateTask = createAsyncThunk(\n    'tasks/update',\n    async (task: Task, { getState, rejectWithValue }) => {\n        try {\n            const { auth } = getState() as RootState;\n            const response = await taskService.updateTask(task, auth.token!);\n            return response.data;\n        } catch (error: any) {\n            return rejectWithValue(error.response?.data?.message || 'Failed to update task');\n        }\n    }\n);\n\nexport const deleteTask = createAsyncThunk(\n    'tasks/delete',\n    async (taskId: string, { getState, rejectWithValue }) => {\n        try {\n            const { auth } = getState() as RootState;\n            await taskService.deleteTask(taskId, auth.token!);\n            return taskId;\n        } catch (error: any) {\n            return rejectWithValue(error.response?.data?.message || 'Failed to delete task');\n        }\n    }\n);\n\nexport const toggleTask = createAsyncThunk(\n    'tasks/toggle',\n    async (taskId: string, { getState, rejectWithValue }) => {\n        try {\n            const { auth } = getState() as RootState;\n            await taskService.toggleTask(taskId, auth.token!);\n            return taskId;\n        } catch (error: any) {\n            return rejectWithValue(error.response?.data?.message || 'Failed to toggle task');\n        }\n    }\n);\n\nconst taskSlice = createSlice({\n    name: 'tasks',\n    initialState,\n    reducers: {},\n    extraReducers: (builder) => {\n        // Individual cases first\n        builder\n            .addCase(fetchTasks.pending, (state) => {\n                state.isLoading = true;\n                state.error = null;\n            })\n            .addCase(fetchTasks.fulfilled, (state, action) => {\n                state.tasks = action.payload;\n                state.isLoading = false;\n            })\n            .addCase(fetchTasks.rejected, (state, action) => {\n                state.isLoading = false;\n                state.error = action.error.message || 'Failed to fetch tasks';\n            });\n\n        // Add other async thunks similarly\n        builder\n            .addCase(createTask.pending, (state) => {\n                state.isLoading = true;\n                state.error = null;\n            })\n            .addCase(createTask.fulfilled, (state, action) => {\n                state.tasks.push(action.payload);\n                state.isLoading = false;\n            });\n    }\n});\n\nexport default taskSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}